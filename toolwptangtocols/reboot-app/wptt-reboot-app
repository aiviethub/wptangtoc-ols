#!/bin/bash
echo ""
echo ""
echo ""
echo "========================================================================="
echo "|Quan ly Reboot APP => Reboot ALL service                               |"
echo "========================================================================="
echo ""
echo ""
echo "Dang thuc hien reboot service Litespeed, Mysql, SSH, fail2ban, crond, LSMemcached."
systemctl restart lsmcd
/usr/local/lsws/bin/lswsctrl restart >/dev/null 2>&1
systemctl restart mariadb.service
systemctl restart sshd.service
systemctl restart crond.service
systemctl restart fail2ban
echo "Hoan thanh reboot service Litespeed, Mysql, SSH, fail2ban, crond, LSMemcached."
echo "+-----------------------------------------------------------------------+"
echo "|Tinh trang hoat dong cac service hien tai                              |"
echo "+-----------------------------------------------------------------------+"
echo "|LiteSpeed     : $(systemctl status lshttpd.service | grep 'Active' | cut -f2 -d':' | xargs | cut -f1 -d' ' | xargs)                                                 |"
echo "|MariaDB       : $(systemctl status mariadb.service | grep 'Active' | cut -f2 -d':' | xargs | cut -f1 -d' ' | xargs)                                                 |"
echo "|LSMemcached   : $(systemctl status lsmcd.service | grep 'Active' | cut -f2 -d':' | xargs | cut -f1 -d' ' | xargs)                                                 |"
echo "|SSH           : $(systemctl status sshd.service | grep 'Active' | cut -f2 -d':' | xargs | cut -f1 -d' ' | xargs)                                                 |"
echo "|Crond         : $(systemctl status crond.service | grep 'Active' | cut -f2 -d':' | xargs | cut -f1 -d' ' | xargs)                                                 |"
echo "|Fail2Ban      : $(systemctl status fail2ban.service | grep 'Active' | cut -f2 -d':' | xargs | cut -f1 -d' ' | xargs)                                                 |"
echo "+-----------------------------------------------------------------------+"

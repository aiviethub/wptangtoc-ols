#!/bin/bash
function huong_dan(){
T√≠nh nƒÉng IP lu√¥n cho ph√©p [Danh s√°ch tr·∫Øng CSF] trong WPTangToc OLS cho ph√©p b·∫°n th√™m c√°c ƒë·ªãa ch·ªâ IP ho·∫∑c d·∫£i IP c·ª• th·ªÉ v√†o m·ªôt danh s√°ch tr·∫Øng ƒë·∫∑c bi·ªát c·ªßa t∆∞·ªùng l·ª≠a ConfigServer Security & Firewall [CSF]. C√°c IP trong danh s√°ch n√†y s·∫Ω lu√¥n ƒë∆∞·ª£c ph√©p truy c·∫≠p v√†o m√°y ch·ªß c·ªßa b·∫°n, v∆∞·ª£t qua h·∫ßu h·∫øt c√°c quy t·∫Øc ch·∫∑n kh√°c c·ªßa CSF [bao g·ªìm c·∫£ ch·∫∑n theo qu·ªëc gia, ch·∫∑n t·∫°m th·ªùi do LFD, v.v.].

üéØ M·ª•c ƒë√≠ch c·ªßa t√≠nh nƒÉng n√†y trong WPTangToc OLS
 * ƒê·∫£m b·∫£o Truy c·∫≠p Cho IP Quan tr·ªçng: Gi√∫p IP c√° nh√¢n c·ªßa b·∫°n [n·∫øu l√† IP tƒ©nh], IP vƒÉn ph√≤ng, ho·∫∑c IP c·ªßa c√°c d·ªãch v·ª• b√™n th·ª© ba thi·∫øt y·∫øu [nh∆∞ c·ªïng thanh to√°n, c√¥ng c·ª• gi√°m s√°t, API] kh√¥ng bao gi·ªù b·ªã CSF v√¥ t√¨nh ch·∫∑n.
 * V∆∞·ª£t qua C√°c Quy t·∫Øc Ch·∫∑n Nghi√™m ng·∫∑t: N·∫øu b·∫°n ƒë√£ thi·∫øt l·∫≠p c√°c quy t·∫Øc ch·∫∑n r·∫•t ch·∫∑t ch·∫Ω [v√≠ d·ª•: ch·∫∑n nhi·ªÅu qu·ªëc gia, gi·ªõi h·∫°n k·∫øt n·ªëi th·∫•p], danh s√°ch tr·∫Øng cho ph√©p c√°c IP tin c·∫≠y v·∫´n ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng.
 * Qu·∫£n l√Ω Danh s√°ch tr·∫Øng ƒê∆°n gi·∫£n: WPTangToc OLS cung c·∫•p m·ªôt giao di·ªán ho·∫∑c l·ªánh ti·ªán l·ª£i ƒë·ªÉ b·∫°n th√™m IP v√†o danh s√°ch tr·∫Øng c·ªßa CSF m√† kh√¥ng c·∫ßn ph·∫£i ch·ªânh s·ª≠a th·ªß c√¥ng c√°c t·ªáp c·∫•u h√¨nh v√† kh·ªüi ƒë·ªông l·∫°i CSF.

T√≥m l·∫°i, t√≠nh nƒÉng IP lu√¥n cho ph√©p [Danh s√°ch tr·∫Øng CSF] trong WPTangToc OLS l√† m·ªôt c√¥ng c·ª• thi·∫øt y·∫øu gi√∫p b·∫°n ƒë·∫£m b·∫£o c√°c k·∫øt n·ªëi quan tr·ªçng v√† ƒë√°ng tin c·∫≠y lu√¥n c√≥ th·ªÉ truy c·∫≠p m√°y ch·ªß, ngay c·∫£ khi b·∫°n ƒëang √°p d·ª•ng c√°c ch√≠nh s√°ch t∆∞·ªùng l·ª≠a nghi√™m ng·∫∑t kh√°c.
}


echo "========================================================================="
echo "|Qu·∫£n l√Ω b·∫£o m·∫≠t => CSF => IP lu√¥n ph√©p tho·∫£i m√°i danh s√°ch tr·∫Øng       |"
echo "========================================================================="
. /etc/wptt/echo-color
read -r -p "Nh·∫≠p ƒë·ªãa ch·ªâ IP b·∫°n cho v√†o danh s√°ch tr·∫Øng [Tho√°t = 0]: " ip

if [[ $ip = '' || $ip = '0' ]];then
. /etc/wptt/wptt-bao-mat-main/csf-main 1
fi

if ! [[ $ip =~ ^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+$ ]]; then
echoDo "B·∫°n nh·∫≠p kh√¥ng ƒë√∫ng ƒë·ªãnh d·∫°ng IPv4"
. /etc/wptt/wptt-bao-mat-main/csf-main 1
fi
_runing "Ch√©p ph√©p IP $ip v√†o danh s√°ch tr·∫Øng"
csf -a "${ip}" >/dev/null 2>&1
csf -x >/dev/null 2>&1
csf -e >/dev/null 2>&1
systemctl restart csf
systemctl restart lfd
_rundone "Ch√©p ph√©p IP $ip v√†o danh s√°ch tr·∫Øng"

check_menu_wptangtoc_active=$1
if [[ $check_menu_wptangtoc_active = "98" ]];then
. /etc/wptt/wptt-bao-mat-main/csf-main 1
fi





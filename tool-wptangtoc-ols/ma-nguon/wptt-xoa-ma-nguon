#!/bin/bash

function huong_dan(){
T√≠nh nƒÉng xo√° m√£ ngu·ªìn website, th√¨ ƒë√¢y l√† m·ªôt ch·ª©c nƒÉng m·∫°nh m·∫Ω v√† nguy hi·ªÉm, cho ph√©p b·∫°n x√≥a to√†n b·ªô c√°c t·ªáp tin v√† th∆∞ m·ª•c [m√£ ngu·ªìn PHP, HTML, CSS, JS, h√¨nh ·∫£nh, v.v.] c·ªßa m·ªôt website c·ª• th·ªÉ kh·ªèi m√°y ch·ªß c·ªßa b·∫°n.

T√≠nh nƒÉng Xo√° M√£ Ngu·ªìn Website
üéØ M·ª•c ƒë√≠ch s·ª≠ d·ª•ng:
 * D·ªçn d·∫πp: Lo·∫°i b·ªè c√°c website th·ª≠ nghi·ªám [test/staging] ho·∫∑c d·ª± √°n c≈©.
 * Chu·∫©n b·ªã C√†i ƒë·∫∑t l·∫°i: X√≥a m√£ ngu·ªìn c≈© tr∆∞·ªõc khi c√†i ƒë·∫∑t m·ªôt phi√™n b·∫£n website m·ªõi ho√†n to√†n.

T√≥m l·∫°i: T√≠nh nƒÉng x√≥a m√£ ngu·ªìn website trong WPTangToc OLS l√† m·ªôt c√¥ng c·ª• ti·ªán l·ª£i ƒë·ªÉ d·ªçn d·∫πp m√°y ch·ªß nh∆∞ng c·ª±c k·ª≥ nguy hi·ªÉm. H√£y s·ª≠ d·ª•ng n√≥ v·ªõi s·ª± c·∫©n tr·ªçng t·ªëi ƒëa v√† lu√¥n ƒë·∫£m b·∫£o b·∫°n ƒë√£ c√≥ b·∫£n sao l∆∞u ƒë·∫ßy ƒë·ªß tr∆∞·ªõc khi nh·∫•n n√∫t x√≥a. Lu√¥n ƒë·ªçc k·ªπ t√†i li·ªáu ho·∫∑c h·ªèi c·ªông ƒë·ªìng h·ªó tr·ª£ c·ªßa WPTangToc OLS n·∫øu b·∫°n kh√¥ng ch·∫Øc ch·∫Øn.
}


echo ""
echo ""
echo ""
echo "========================================================================="
echo "|Qu·∫£n l√Ω M√£ ngu·ªìn => X√≥a m√£ ngu·ªìn website                               |"
echo "========================================================================="
. /etc/wptt/.wptt.conf
if [[ $ngon_ngu = '' ]];then
	ngon_ngu='vi'
fi
. /etc/wptt/lang/$ngon_ngu.sh

. /etc/wptt/tenmien
echo ""
echo ""
echo "L·ª±a ch·ªçn website b·∫°n mu·ªën x√≥a m√£ ngu·ªìn: "
echo ""
lua_chon_NAME
name="$NAME"

. /etc/wptt/echo-color
if [[ "$NAME" = "0" || "$NAME" = "" ]]; then
    . /etc/wptt/wptt-wordpress-main 1
fi

pathcheck="/etc/wptt/vhost/.$NAME.conf"
if [[ ! -f "$pathcheck" ]]; then
    clear
	echoDo "T√™n mi·ªÅn kh√¥ng t·ªìn t·∫°i tr√™n h·ªá th·ªëng n√†y"
    sleep 3
    . /etc/wptt/wptt-wordpress-main 1
    exit
fi

echo "X√°c nh·∫≠n b·∫°n mu·ªën x√≥a m√£ ngu·ªìn website ${NAME}"
prompt="Nh·∫≠p l·ª±a ch·ªçn c·ªßa b·∫°n [1-2]: "
dongy="n"
options=("ƒê·ªìng √Ω" "Kh√¥ng ƒë·ªìng √Ω")
PS3="$prompt"
select opt in "${options[@]}"; do
	case "$REPLY" in
		1)
			dongy="y"
			break
			;;

		2)
			dongy="n"
			break
			;;

		$((${#options[@]} + 1)))
			printf "\nB·∫°n nh·∫≠p sai h·ªá th·ªëng s·∫Ω ch·ªçn l√† kh√¥ng ƒë·ªìng √Ω\n"
			break
			;;
		*)
			printf "B·∫°n nh·∫≠p sai h·ªá th·ªëng s·∫Ω ch·ªçn l√† kh√¥ng ƒë·ªìng √Ω\n"
			break
			;;
	esac
done

if [[ "$dongy" = "y" ]]; then
	_runing "X√≥a m√£ ngu·ªìn website $NAME"
    rm -rf /usr/local/lsws/"$NAME"/html/*
	_rundone "X√≥a m√£ ngu·ªìn website $NAME"
else
    . /etc/wptt/wptt-ma-nguon-main 1
fi

check_menu_wptangtoc_active=$1
if [[ $check_menu_wptangtoc_active = "98" ]];then
. /etc/wptt/wptt-ma-nguon-main 1
fi


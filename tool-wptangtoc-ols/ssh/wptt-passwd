#!/bin/bash
echo "========================================================================="
echo "|Bảo Mật => Thay đổi SSH/sFTP Password tài khoản Root" 				  |
echo "========================================================================="
echo "Lời khuyên: hãy đặt password ít nhất 26 ký tự để nâng cao bảo mật"

check_root=$(who | awk -F ' ' '{print $1}')
if [[ "$check_root" != "root" ]]; then
  if [[ -f /home/$check_root/.bashrc ]]; then
	  echo "Hiện tại bạn không sử dụng tài khoản root"
	  echo "Vì vậy không thể thay đổi mật khẩu tài khoản root"
. /etc/wptt/wptt-ssh-main 1
  fi
fi

. /etc/wptt/echo-color
check_thay_doi=$(md5sum /etc/shadow |cut -f1 -d ' ' > /tmp/passwd_root_thay_doi)
passwd root
if [[ $(cat /tmp/passwd_root_thay_doi) != $(md5sum /etc/shadow |cut -f1 -d ' ')  ]];then
	_rundone "Thay đổi PassWord Root"
else
	_runloi "Thay đổi PassWord Root"
fi

check_menu_wptangtoc_active=$1
if [[ $check_menu_wptangtoc_active = "98" ]];then
. /etc/wptt/wptt-ssh-main 1
fi


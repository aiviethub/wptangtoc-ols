#!/bin/bash
# @author: Gia Tu·∫•n
# @website: https://wptangtoc.com
# @email: giatuan@wptangtoc.com
# @since: 2025

function huong_dan(){
T√≠nh nƒÉng Qu·∫£n l√Ω phpMyAdmin trong WPTangToc OLS l√† m·ªôt c√¥ng c·ª• gi√∫p b·∫°n d·ªÖ d√†ng c√†i ƒë·∫∑t, g·ª° b·ªè v√† qu·∫£n l√Ω vi·ªác truy c·∫≠p v√†o phpMyAdmin ‚Äì m·ªôt giao di·ªán web ph·ªï bi·∫øn ƒë·ªÉ qu·∫£n tr·ªã c∆° s·ªü d·ªØ li·ªáu MySQL/MariaDB. üêòüíª

Gi·ªõi thi·ªáu ng·∫Øn g·ªçn:

M·ª•c ƒë√≠ch: Cung c·∫•p m·ªôt c√°ch thu·∫≠n ti·ªán ƒë·ªÉ ng∆∞·ªùi d√πng c√≥ th·ªÉ t∆∞∆°ng t√°c v·ªõi c∆° s·ªü d·ªØ li·ªáu c·ªßa h·ªç th√¥ng qua m·ªôt giao di·ªán ƒë·ªì h·ªça tr·ª±c quan, thay v√¨ ch·ªâ s·ª≠ d·ª•ng d√≤ng l·ªánh. ƒêi·ªÅu n√†y r·∫•t h·ªØu √≠ch cho vi·ªác xem, s·ª≠a, nh·∫≠p/xu·∫•t d·ªØ li·ªáu, v√† qu·∫£n l√Ω c·∫•u tr√∫c database.
C√°ch ho·∫°t ƒë·ªông:
 * C√†i ƒë·∫∑t/G·ª° b·ªè phpMyAdmin: Cho ph√©p b·∫°n nhanh ch√≥ng c√†i ƒë·∫∑t phpMyAdmin l√™n m√°y ch·ªß ho·∫∑c g·ª° b·ªè n√≥ n·∫øu kh√¥ng c√≤n nhu c·∫ßu s·ª≠ d·ª•ng.
 * B·∫£o m·∫≠t truy c·∫≠p: WPTangToc OLS c√≥ th·ªÉ h·ªó tr·ª£ thi·∫øt l·∫≠p c√°c bi·ªán ph√°p b·∫£o m·∫≠t cho phpMyAdmin, v√≠ d·ª• nh∆∞ thay ƒë·ªïi ƒë∆∞·ªùng d·∫´n truy c·∫≠p m·∫∑c ƒë·ªãnh ho·∫∑c c·∫•u h√¨nh th√™m l·ªõp b·∫£o v·ªá [nh∆∞ x√°c th·ª±c HTTP c∆° b·∫£n] ƒë·ªÉ h·∫°n ch·∫ø truy c·∫≠p tr√°i ph√©p.
 * Hi·ªÉn th·ªã th√¥ng tin truy c·∫≠p: Cung c·∫•p URL ƒë·ªÉ b·∫°n c√≥ th·ªÉ truy c·∫≠p v√†o giao di·ªán phpMyAdmin sau khi c√†i ƒë·∫∑t.

L·ª£i √≠ch:
 * Qu·∫£n l√Ω database tr·ª±c quan: D·ªÖ d√†ng th·ª±c hi·ªán c√°c thao t√°c ph·ª©c t·∫°p tr√™n c∆° s·ªü d·ªØ li·ªáu m√† kh√¥ng c·∫ßn nhi·ªÅu ki·∫øn th·ª©c v·ªÅ SQL.
 * Ti·ªán l·ª£i: C√†i ƒë·∫∑t v√† c·∫•u h√¨nh phpMyAdmin nhanh ch√≥ng th√¥ng qua WPTangToc OLS.
 * TƒÉng c∆∞·ªùng b·∫£o m·∫≠t [n·∫øu c√≥ h·ªó tr·ª£]: Gi√∫p b·∫£o v·ªá c√¥ng c·ª• qu·∫£n tr·ªã database quan tr·ªçng n√†y kh·ªèi c√°c r·ªßi ro an ninh.
T√≠nh nƒÉng n√†y l√†m cho vi·ªác qu·∫£n tr·ªã c∆° s·ªü d·ªØ li·ªáu tr√™n m√°y ch·ªß c·ªßa b·∫°n tr·ªü n√™n ƒë∆°n gi·∫£n v√† d·ªÖ ti·∫øp c·∫≠n h∆°n.
}


if [[ $1 = "" ]];then
. /etc/wptt/wptt-header-menu
header_menu
else
	. /etc/wptt/echo-color
echoDo "=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-="
fi

. /etc/wptt/.wptt.conf
if [[ $ngon_ngu = '' ]];then
	ngon_ngu='vi'
fi
. /etc/wptt/lang/$ngon_ngu.sh

echo ""
echo ""
echo "$quan_ly_phpmyadmin:"
echo ""
options=(
	"$bat PhpMyAdmin"                       #1
	"$tat PhpMyAdmin"                     #2
	"$xem_thong_tin_tai_khoan_bao_mat PhpMyAdmin"            #3
	"$thay_doi $tai_khoan $dang_nhap PhpMyAdmin"              #4
	"$cap_nhat PhpMyAdmin"              #5
)
# H√†m th·ª±c thi h√†nh ƒë·ªông d·ª±a tr√™n index (cho menu Qu·∫£n l√Ω PhpMyAdmin)
run_action() {
    local index=$1
    local script_path=""
    local script_args="" # Tham s·ªë s·∫Ω ƒë∆∞·ª£c ƒë·∫∑t trong case

    case $index in
         0) script_path="/etc/wptt/phpmyadmin/wptt-mo-phpmyadmin";             script_args="98" ;;
         1) script_path="/etc/wptt/phpmyadmin/wptt-xoa-phpmyadmin";            script_args="98" ;;
         2) script_path="/etc/wptt/phpmyadmin/wptt-thongtin-phpmyadmin";       script_args="98" ;;
         3) script_path="/etc/wptt/phpmyadmin/wptt-phpmyadmin-doi-password";  script_args="98" ;;
         4) script_path="/etc/wptt/update/wptt-update-phpmyadmin";          script_args="97" ;; # Ch√∫ √Ω: th∆∞ m·ª•c update v√† tham s·ªë 97
        *) echo "${lua_chon_khong_hop_le:-L·ª±a ch·ªçn kh√¥ng h·ª£p l·ªá}: Index $index."; return 1 ;;
    esac

    # Ki·ªÉm tra v√† ch·∫°y script con
    if [[ -x "$script_path" ]]; then
        # Ki·ªÉm tra xem script_args c√≥ ƒë∆∞·ª£c ƒë·∫∑t kh√¥ng (ƒë·ªÅ ph√≤ng l·ªói logic)
        if [[ -n "$script_args" ]]; then
            "$script_path" "$script_args"
        else
            echo "L·ªói logic: Kh√¥ng t√¨m th·∫•y tham s·ªë cho index $index."
        fi
    else
        echo "L·ªói: Kh√¥ng t√¨m th·∫•y ho·∫∑c kh√¥ng th·ªÉ th·ª±c thi script '$script_path'."
    fi
    # read -rp "Nh·∫•n Enter ƒë·ªÉ quay l·∫°i menu..." # B·ªè comment n·∫øu mu·ªën t·∫°m d·ª´ng
}
. /etc/wptt/wptt-callback-menu-chon


#!/bin/bash
# @author: Gia Tuáº¥n
# @website: https://wptangtoc.com
# @email: giatuan@wptangtoc.com
# @since: 2022
if [[ $1 = "" ]];then
. /etc/wptt/wptt-header-menu
header_menu
else
	. /etc/wptt/echo-color
echoDo "=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-="
fi
echo ""
echo ""
echo "Quan ly Service Application:"
echo ""
options=(
    "Reboot Service Application"                                                                #1
    "Start Service Application"                                                           #2
    "Stop Service Application"                                                                #3
    "Status Service Application"                                                                #4
    "Thiet lap canh bao service ngung hoat dong" #6
)

if [[ -d /usr/local/lsmcd ]];then
options+=("Reboot LSMemcached")
fi


if [[ -f /etc/redis.conf ]];then
options+=("Reboot Redis")
fi


if [[ -f /etc/redis.conf && -d /usr/local/lsmcd ]];then
PS3="
Nhap lua chon cua ban (1-${#options[@]}) [0=Thoat]: "
select opt in "${options[@]}"; do
    case $opt in

    "${options[0]}")
        "/etc/wptt/reboot-app/wptt-reboot-litespeed" 98
        ;;
    "${options[1]}")
        "/etc/wptt/reboot-app/wptt-reboot-mariadb" 98
        ;;

    "${options[2]}")
        "/etc/wptt/reboot-app/wptt-reboot-fail2ban" 98
        ;;

    "${options[3]}")
        "/etc/wptt/reboot-app/wptt-reboot-app" 98
        ;;

    "${options[4]}")
        "/etc/wptt/reboot-app/wptt-reboot" 98
        ;;

    "${options[5]}")
        "/etc/wptt/reboot-app/wptt-auto-reboot-thiet-lap" 98
        ;;

    "${options[6]}")
        "/etc/wptt/reboot-app/wptt-reboot-lsmemcached" 98
        ;;

    "${options[7]}")
        "/etc/wptt/reboot-app/wptt-reboot-redis" 98
        ;;

    *) wptangtoc ;;
    esac
done
fi

if [[ -f /etc/redis.conf && ! -d /usr/local/lsmcd ]];then
PS3="
Nhap lua chon cua ban (1-${#options[@]}) [0=Thoat]: "
select opt in "${options[@]}"; do
    case $opt in

    "${options[0]}")
        "/etc/wptt/reboot-app/wptt-reboot-litespeed" 98
        ;;
    "${options[1]}")
        "/etc/wptt/reboot-app/wptt-reboot-mariadb" 98
        ;;

    "${options[2]}")
        "/etc/wptt/reboot-app/wptt-reboot-fail2ban" 98
        ;;

    "${options[3]}")
        "/etc/wptt/reboot-app/wptt-reboot-app" 98
        ;;

    "${options[4]}")
        "/etc/wptt/reboot-app/wptt-reboot" 98
        ;;

    "${options[5]}")
        "/etc/wptt/reboot-app/wptt-auto-reboot-thiet-lap" 98
        ;;

    "${options[6]}")
        "/etc/wptt/reboot-app/wptt-reboot-redis" 98
        ;;

    *) wptangtoc ;;
    esac
done
fi

if [[ ! -f /etc/redis.conf && -d /usr/local/lsmcd ]];then
PS3="
Nhap lua chon cua ban (1-${#options[@]}) [0=Thoat]: "
select opt in "${options[@]}"; do
    case $opt in

    "${options[0]}")
        "/etc/wptt/reboot-app/wptt-reboot-litespeed" 98
        ;;
    "${options[1]}")
        "/etc/wptt/reboot-app/wptt-reboot-mariadb" 98
        ;;

    "${options[2]}")
        "/etc/wptt/reboot-app/wptt-reboot-fail2ban" 98
        ;;

    "${options[3]}")
        "/etc/wptt/reboot-app/wptt-reboot-app" 98
        ;;

    "${options[4]}")
        "/etc/wptt/reboot-app/wptt-reboot" 98
        ;;

    "${options[5]}")
        "/etc/wptt/reboot-app/wptt-auto-reboot-thiet-lap" 98
        ;;
    "${options[6]}")
        "/etc/wptt/reboot-app/wptt-reboot-lsmemcached" 98
        ;;
    *) wptangtoc ;;
    esac
done
fi

if [[ ! -f /etc/redis.conf && ! -d /usr/local/lsmcd ]];then
PS3="
Nhap lua chon cua ban (1-${#options[@]}) [0=Thoat]: "
select opt in "${options[@]}"; do
    case $opt in

    "${options[0]}")
        "/etc/wptt/reboot-app/wptt-reboot-litespeed" 98
        ;;
    "${options[1]}")
        "/etc/wptt/reboot-app/wptt-reboot-mariadb" 98
        ;;

    "${options[2]}")
        "/etc/wptt/reboot-app/wptt-reboot-fail2ban" 98
        ;;

    "${options[3]}")
        "/etc/wptt/reboot-app/wptt-reboot-app" 98
        ;;

    "${options[4]}")
        "/etc/wptt/reboot-app/wptt-reboot" 98
        ;;

    "${options[5]}")
        "/etc/wptt/reboot-app/wptt-auto-reboot-thiet-lap" 98
        ;;
    *) wptangtoc ;;
    esac
done
fi

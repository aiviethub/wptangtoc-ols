#!/bin/bash
echo "========================================================================="
echo "Quản lý Swap > Xóa Swap"
echo "========================================================================="
echo ""

uswap=$(free -m | awk '/Swap/ {print $2}')
uswap_dang_dung=$(free -m | awk '/Swap/ {print $3}')
uswap_con_trong=$(free -m | awk '/Swap/ {print $4}')

echo "Dung lượng swap hiện tại: $uswap"
echo "Dung lượng swap đang dùng: $uswap_dang_dung"
echo "Dung lượng swap đang còn thừa: $uswap_con_trong"
echo ""
echo ""
. /etc/wptt/echo-color
read -p "Xác nhận xóa Swap? (y/n): " confirm

if [[ ! -f "/var/swap.1" ]]; then
echoDo "Swap chua kich hoat khong ton tai..."
. /etc/wptt/wptt-swap-main 1
	fi
if [[ "$confirm" = 'y' ]]; then
    if [[ -f "/var/swap.1" ]]; then
		_runing "Xóa Swap"
        swapoff -a -v >/dev/null 2>&1
        rm -rf /var/swap.1 
        sed -i '/swap.1/d' /etc/fstab 
		_rundone "Xóa Swap"
    fi
fi


check_menu_wptangtoc_active=$1
if [[ $check_menu_wptangtoc_active = "98" ]];then
. /etc/wptt/wptt-swap-main 1
fi


#!/bin/bash
#
#
# @author: Gia Tuấn
# @website: https://wptangtoc.com
# @since: 2021

echo "========================================================================="
echo "|Quản lý WebGuiAdmin => Hủy kích hoạt                                   |"
echo "========================================================================="
. /etc/wptt/.wptt.conf
. /etc/wptt/echo-color
path="/usr/local/lsws/conf/disablewebconsole"
if [[ -f $path ]]; then
    echoDo "Ban da tat webguiadmin truoc do roi"
    sleep 3
    . /etc/wptt/wptt-webadmin-main 1
    exit
fi

port_webgui_openlitespeed=$(cat /usr/local/lsws/admin/conf/admin_config.conf | grep "address" | cut -f2 -d":")

read -p "Xac nhan ban tat openlitespeed webgui? (y/n): " confirm
if [[ "$confirm" = "y" ]]; then
_runing "Tắt webguiadmin"
    touch /usr/local/lsws/conf/disablewebconsole
    firewall-cmd --zone=public --remove-port=$port_webgui_openlitespeed/tcp --permanent >/dev/null 2>&1
    firewall-cmd --reload >/dev/null 2>&1
    /usr/local/lsws/bin/lswsctrl restart >/dev/null 2>&1
_rundone "Tắt webguiadmin"
fi

check_menu_wptangtoc_active=$1
if [[ $check_menu_wptangtoc_active = "98" ]];then
 . /etc/wptt/wptt-webadmin-main 1
fi
